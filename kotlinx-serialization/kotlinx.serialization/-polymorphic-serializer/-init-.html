<HTML>
<HEAD>
<meta charset="UTF-8">
<title>kotlinx.serialization.PolymorphicSerializer.<init> - kotlinx-serialization</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">kotlinx-serialization</a>&nbsp;/&nbsp;<a href="../index.html">kotlinx.serialization</a>&nbsp;/&nbsp;<a href="index.html">PolymorphicSerializer</a>&nbsp;/&nbsp;<a href="./-init-.html">&lt;init&gt;</a><br/>
<br/>
<h1>&lt;init&gt;</h1>
<a name="kotlinx.serialization.PolymorphicSerializer$&lt;init&gt;(kotlin.reflect.KClass((kotlinx.serialization.PolymorphicSerializer.T)))"></a>
(common, js, jvm, native) <code><span class="identifier">&lt;init&gt;</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.PolymorphicSerializer$<init>(kotlin.reflect.KClass((kotlinx.serialization.PolymorphicSerializer.T)))/baseClass">baseClass</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html"><span class="identifier">KClass</span></a><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span><span class="symbol">)</span></code>
<p>This class provides support for multiplatform polymorphic serialization for interfaces and abstract classes.</p>
<p>To avoid the most common security pitfalls and reflective lookup (and potential load) of an arbitrary class,
all serializable implementations of any polymorphic type must be <a href="../../kotlinx.serialization.modules/-serializers-module-builder/polymorphic.html#kotlinx.serialization.modules.SerializersModuleBuilder$polymorphic(kotlin.reflect.KClass((kotlinx.serialization.modules.SerializersModuleBuilder.polymorphic.Base)), kotlin.reflect.KClass((kotlinx.serialization.modules.SerializersModuleBuilder.polymorphic.Sub)), kotlinx.serialization.KSerializer((kotlinx.serialization.modules.SerializersModuleBuilder.polymorphic.Sub)))">registered</a>
in advance in the scope of base polymorphic type, efficiently preventing unbounded polymorphic serialization
of an arbitrary type.</p>
<p>Polymorphic serialization is enabled automatically by default for interfaces and <a href="../-serializable/index.html#kotlinx.serialization.Serializable">Serializable</a> abstract classes.
To enable this feature explicitly on other types, use <code>@SerializableWith(PolymorphicSerializer::class)</code>
or <a href="../-polymorphic/index.html#kotlinx.serialization.Polymorphic">Polymorphic</a> annotation on the property.</p>
<p>Usage of the polymorphic serialization can be demonstrated by the following example:</p>
<pre><code>abstract class BaseRequest()
@Serializable
data class RequestA(val id: Int): BaseRequest()
@Serializable
data class RequestB(val s: String): BaseRequest()

abstract class BaseResponse()
@Serializable
data class ResponseC(val payload: Long): BaseResponse()
@Serializable
data class ResponseD(val payload: ByteArray): BaseResponse()

@Serializable
data class Message(
    @Polymorphic val request: BaseRequest,
    @Polymorphic val response: BaseResponse
)
</code></pre>
<p>In this example, both request and response in <code>Message</code> are serializable with <a href="index.html#kotlinx.serialization.PolymorphicSerializer">PolymorphicSerializer</a>.</p>
<p><code>BaseRequest</code> and <code>BaseResponse</code> are base classes and they are captured during compile time by the plugin.
Yet <a href="index.html#kotlinx.serialization.PolymorphicSerializer">PolymorphicSerializer</a> for <code>BaseRequest</code> should only allow <code>RequestA</code> and <code>RequestB</code> serializers, and none of the response's serializers.</p>
<p>This is achieved via special registration function in the module:</p>
<pre><code>val requestAndResponseModule = SerializersModule {
    polymorphic(BaseRequest::class) {
        subclass&lt;RequestA&gt;()
        subclass&lt;RequestB&gt;()
    }
    polymorphic(BaseResponse::class) {
        subclass&lt;ResponseC&gt;()
        subclass&lt;ResponseD&gt;()
    }
}
</code></pre>
<p><strong>See Also</strong><br/>
<p><a href="../../kotlinx.serialization.modules/-serializers-module.html#kotlinx.serialization.modules$SerializersModule(kotlin.Function1((kotlinx.serialization.modules.SerializersModuleBuilder, kotlin.Unit)))">SerializersModule</a></p>
<p><a href="../../kotlinx.serialization.modules/-serializers-module-builder/polymorphic.html#kotlinx.serialization.modules.SerializersModuleBuilder$polymorphic(kotlin.reflect.KClass((kotlinx.serialization.modules.SerializersModuleBuilder.polymorphic.Base)), kotlin.reflect.KClass((kotlinx.serialization.modules.SerializersModuleBuilder.polymorphic.Sub)), kotlinx.serialization.KSerializer((kotlinx.serialization.modules.SerializersModuleBuilder.polymorphic.Sub)))">SerializersModuleBuilder.polymorphic</a></p>
</p>
</BODY>
</HTML>

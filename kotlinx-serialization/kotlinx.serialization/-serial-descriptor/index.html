<HTML>
<HEAD>
<meta charset="UTF-8">
<title>kotlinx.serialization.SerialDescriptor - kotlinx-serialization</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">kotlinx-serialization</a>&nbsp;/&nbsp;<a href="../index.html">kotlinx.serialization</a>&nbsp;/&nbsp;<a href="./index.html">SerialDescriptor</a><br/>
<br/>
<h1>SerialDescriptor</h1>
<a name="kotlinx.serialization.SerialDescriptor"></a>
(common, js, jvm, native) <code><span class="keyword">interface </span><span class="identifier">SerialDescriptor</span></code>
<p>Serial descriptor is an inherent property of <a href="../-k-serializer/index.html#kotlinx.serialization.KSerializer">KSerializer</a> that describes the structure of the serializable type.
The structure of the serializable type is not only the property of the type, but also of the serializer as well,
meaning that one type can have multiple descriptors that have completely different structure.</p>
<p>For example, the class <code>class Color(val rgb: Int)</code> can have multiple serializable representations,
such as <code>{"rgb": 255}</code>, <code>"#0000FF"</code>, <code>[0, 0, 255]</code> and <code>{"red": 0, "green": 0, "blue": 255}</code>.
Representations are determined by serializers and each such serializer has its own descriptor that identifies
each structure in a distinguishable and format-agnostic manner.</p>
<h3>Structure</h3>
<p>Serial descriptor is identified by its <a href="serial-name.html#kotlinx.serialization.SerialDescriptor$serialName">name</a> and consists of kind, potentially empty set of
children elements and additional metadata.</p>
<ul><li><a href="serial-name.html#kotlinx.serialization.SerialDescriptor$serialName">serialName</a> uniquely identifies descriptor (and the corresponding serializer) for non-generic types.
For generic types, the actual type substitution  is omitted from the string representation and the name
identifies the family of the serializers without type substitutions.
<a href="serial-name.html#kotlinx.serialization.SerialDescriptor$serialName">serialName</a> is typically used to specify the type of the target class during serialization of polymorphic and sealed
classes, for observability and diagnostics.
Serial descriptor is uniquely identified by its name and consists of kind, potentially empty set of
children elements and additional metadata.</li>
<li><a href="../-serial-kind/index.html#kotlinx.serialization.SerialKind">Kind</a> defines what this descriptor represents: primitive, enum, object, collection et cetera.</li>
<li>Children elements are represented as serial descriptors as well and define the structure of the type's elements.</li>
<li>Metadata carries additional potentially useful information, such as nullability, optionality
and serial annotations.</li>
</ul>
<h3>Usages</h3>
<p>There are two general usages of the descriptors: THE serialization process and serialization introspection.</p>
<h4>Serialization</h4>
<p>Serial descriptor is used as bridge between decoders/encoders and serializers.
When asking for a next element, the serializer provides an expected descriptor to the decoder, and,
based on the descriptor content, decoder decides how to parse its input.
In JSON, for example, when the encoder is asked to encode the next element and this element
is a subtype of <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html">List</a>, the encoder receives a descriptor with <a href="../-structure-kind/-l-i-s-t.html#kotlinx.serialization.StructureKind.LIST">StructureKind.LIST</a> and, based on that,
first writes an opening square bracket before writing the content of the list.</p>
<p>Serial descriptor <em>encapsulates</em> the structure of the data, so serializers can be free from
format-specific details. <code>ListSerializer</code> knows nothing about JSON and square brackets, providing
only the structure of the data and delegating encoding decision to the format itself.</p>
<h4>Introspection</h4>
<p>Another usage of a serial descriptor is type introspection without its serialization.
Introspection can be used to check, whether the given serializable class complies the
corresponding scheme and to generate JSON or ProtoBuf schema from the given class.</p>
<h3>Indices</h3>
<p>Serial descriptor API operates with children indices.
For the fixed-size structures, such as regular classes, index is represented by a value in
the range from zero to <a href="elements-count.html#kotlinx.serialization.SerialDescriptor$elementsCount">elementsCount</a> and represent and index of the property in this class.
Consequently, primitives do not have children and their element count is zero.</p>
<p>For collections and maps, though, index does not have fixed bound. Regular collections descriptors usually
have one element (<code>T</code>, maps have two, one for keys and one for values), but potentially unlimited
number of actual children values. In such cases, valid indices range is not known statically
and implementations of descriptor should provide consistent and unbounded names and indices.</p>
<h3>Thread-safety and mutability</h3>
<p>Serial descriptor implementation should be immutable after the publication and thread-safe.</p>
<h3>User-defined serial descriptors</h3>
<p>The best way to define a custom descriptor is to use <a href="index.html#kotlinx.serialization.SerialDescriptor">SerialDescriptor</a> builder function, where
for each serializable property corresponding element is declared.</p>
<p>Example:</p>
<pre><code>// Class with custom serializer and custom serial descriptor
class Data(
    val intField: Int, // This field is ignored by custom serializer
    val longField: Long, // This field is written as long, but in serialized form is named as "_longField"
    val stringList: List&lt;String&gt; // This field is written as regular list of strings
)

// Descriptor for such class:
SerialDescriptor("my.package.Data") {
    // intField is deliberately ignored by serializer -- not present in the descriptor as well
    element&lt;Long&gt;("_longField") // longField is named as _longField
    element("stringField", listDescriptor&lt;String&gt;())
}
</code></pre>
<p>For a classes that are represented as a single primitive value,
<a href="../-primitive-descriptor.html#kotlinx.serialization$PrimitiveDescriptor(kotlin.String, kotlinx.serialization.PrimitiveKind)">PrimitiveDescriptor</a> builder function can be used instead.</p>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
(common, js, jvm, native) 
<h4><a href="annotations.html">annotations</a></h4>
</td>
<td>
<p>Returns a serial annotations of the associated class.
Serial annotations can be used to specify an additional
metadata that may be used during serialization, for example a <a href="#">serial id</a>.</p>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">annotations</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-annotation/index.html"><span class="identifier">Annotation</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
(common, js, jvm, native) 
<h4><a href="elements-count.html">elementsCount</a></h4>
</td>
<td>
<p>The number of elements this descriptor describes, besides from the class itself.
<a href="elements-count.html#kotlinx.serialization.SerialDescriptor$elementsCount">elementsCount</a> describes the number of <strong>semantic</strong> elements, not the number
of actual fields/properties in the serialized form, even though they frequently match.</p>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">elementsCount</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a></code></td>
</tr>
<tr>
<td>
(common, js, jvm, native) 
<h4><a href="is-nullable.html">isNullable</a></h4>
</td>
<td>
<p>Whether the descriptor describes nullable element.
Returns <code>true</code> if associated serializer can serialize/deserialize nullable elements of the described type.</p>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">isNullable</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code></td>
</tr>
<tr>
<td>
(common, js, jvm, native) 
<h4><a href="kind.html">kind</a></h4>
</td>
<td>
<p>The kind of the serialized form that determines <strong>the shape</strong> of the serialized data.
Formats use serial kind to add and parse serializer-agnostic metadata to the result.</p>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">kind</span><span class="symbol">: </span><a href="../-serial-kind/index.html"><span class="identifier">SerialKind</span></a></code></td>
</tr>
<tr>
<td>
(common, js, jvm, native) 
<h4><a href="serial-name.html">serialName</a></h4>
</td>
<td>
<p>Serial name of the descriptor that identifies pair of the associated serializer and target class.</p>
<code><span class="keyword">abstract</span> <span class="keyword">val </span><span class="identifier">serialName</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
(common, js, jvm, native) 
<h4><a href="get-element-annotations.html">getElementAnnotations</a></h4>
</td>
<td>
<p>Returns serial annotations of the child element at the given <a href="get-element-annotations.html#kotlinx.serialization.SerialDescriptor$getElementAnnotations(kotlin.Int)/index">index</a>.
This method differs from <code>getElementDescriptor(index).annotations</code> as it reports only
declaration-specific annotations:</p>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">getElementAnnotations</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.SerialDescriptor$getElementAnnotations(kotlin.Int)/index">index</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-annotation/index.html"><span class="identifier">Annotation</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
(common, js, jvm, native) 
<h4><a href="get-element-descriptor.html">getElementDescriptor</a></h4>
</td>
<td>
<p>Retrieves the descriptor of the child element for the given <a href="get-element-descriptor.html#kotlinx.serialization.SerialDescriptor$getElementDescriptor(kotlin.Int)/index">index</a>.
For the property of type <code>T</code> on the position <code>i</code>, <code>getElementDescriptor(i)</code> yields the same result
as for <code>T.serializer().descriptor</code>, if the serializer for this property is not explicitly overriden
with <code>@Serializable(with = ...</code>)`, <a href="../-polymorphic/index.html#kotlinx.serialization.Polymorphic">Polymorphic</a> or <a href="../-contextual-serialization/index.html#kotlinx.serialization.ContextualSerialization">ContextualSerialization</a>.
This method can be used to completely introspect the type that the current descriptor describes.
This method is guaranteed to be consistent with <a href="elements-count.html#kotlinx.serialization.SerialDescriptor$elementsCount">elementsCount</a>.</p>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">getElementDescriptor</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.SerialDescriptor$getElementDescriptor(kotlin.Int)/index">index</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="./index.html"><span class="identifier">SerialDescriptor</span></a></code></td>
</tr>
<tr>
<td>
(common, js, jvm, native) 
<h4><a href="get-element-index.html">getElementIndex</a></h4>
</td>
<td>
<p>Returns an index in the children list of the given element by its name or <a href="../-composite-decoder/-u-n-k-n-o-w-n_-n-a-m-e.html#kotlinx.serialization.CompositeDecoder.Companion$UNKNOWN_NAME">CompositeDecoder.UNKNOWN_NAME</a>
if there is no such element.
The resulting index, if it is not <a href="../-composite-decoder/-u-n-k-n-o-w-n_-n-a-m-e.html#kotlinx.serialization.CompositeDecoder.Companion$UNKNOWN_NAME">CompositeDecoder.UNKNOWN_NAME</a>, is guaranteed to be usable with <a href="get-element-name.html#kotlinx.serialization.SerialDescriptor$getElementName(kotlin.Int)">getElementName</a>.</p>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">getElementIndex</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.SerialDescriptor$getElementIndex(kotlin.String)/name">name</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a></code></td>
</tr>
<tr>
<td>
(common, js, jvm, native) 
<h4><a href="get-element-name.html">getElementName</a></h4>
</td>
<td>
<p>Returns a <em>positional</em> name of the child at the given <a href="get-element-name.html#kotlinx.serialization.SerialDescriptor$getElementName(kotlin.Int)/index">index</a>.
Positional name usually represents a corresponding property name in the class, associated with
the current descriptor.</p>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">getElementName</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.SerialDescriptor$getElementName(kotlin.Int)/index">index</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code></td>
</tr>
<tr>
<td>
(common, js, jvm, native) 
<h4><a href="is-element-optional.html">isElementOptional</a></h4>
</td>
<td>
<p>Whether the element at the given <a href="is-element-optional.html#kotlinx.serialization.SerialDescriptor$isElementOptional(kotlin.Int)/index">index</a> is optional (can be absent is serialized form).
For generated descriptors, all elements that have a corresponding default parameter value are
marked as optional. Custom serializers can treat optional values in a serialization-specific manner
without default parameters constraint.</p>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">isElementOptional</span><span class="symbol">(</span><span class="identifier" id="kotlinx.serialization.SerialDescriptor$isElementOptional(kotlin.Int)/index">index</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code></td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
